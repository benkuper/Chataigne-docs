# Référence de scripting

Vous trouverez ici une référence quasi-exhaustive sur les fonctions spécifiques de Chataigne.

{% hint style="success" %}
Les scripts dans Chataigne sont basés sur une version simplifiée de Javascript. La plupart des fonctions sont disponibles, mais certaines peuvent manquer. Si certaines fonctions vous manquent, n'hésites pas à aller sur Discord et pourquoi pas faire un don ([https://github.com/sponsors/benkuper](https://github.com/sponsors/benkuper)) pour que je puisse passer plus de temps à améliorer Chataigne !
{% endhint %}

{% hint style="info" %}
Cette documentation ne montre que les fonctions que j'ai rajoutées par-dessus le moteur Javascript de JUCE. Pour avoir plus d'informations sur toutes les fonctions de bases disponibles, vous pouvez regarder dans le [source code du moteur Javascript](https://github.com/benkuper/JUCE/blob/master/modules/juce\_core/javascript/juce\_Javascript.cpp).
{% endhint %}

## Fonctions communes

Il y a quelques fonctions communes que vous pouvez utiliser, quel que soit le type de script.

{% hint style="info" %}
Aucune des fonctions ci-dessous n'est nécessaire lors de la réalisation d'un script, ce sont juste des fonctions d'aide.\
Si vous n'en avez pas besoin, ne les ajoutez pas à votre script, car Chataigne optimisera votre script en fonction des fonctions déclarées dans celui-ci.
{% endhint %}

| Méthode                              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Exemple                                                                                                                                                                    |
| ------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **init()**                           | Si elle est présente, cette fonction sera appelée juste après le chargement du script.                                                                                                                                                                                                                                                                                                                                                                                                         | <p><code>fonction init() {</code></p><p><code>//init vos valeurs, enregistrez les choses et attribuez des variables</code></p><p><code>}</code></p>                        |
| **update(**_deltaTime_**)**          | <p>Si elle est présente, cette fonction sera appelée régulièrement au rythme spécifié par le "Taux de mise à jour" ; paramètre de script.</p><p>Ce paramètre n'est visible que lorsque la fonction est présente dans le scénario. Vous pouvez également modifier le taux à partir du script en appelant <strong>script.setUpdateRate</strong><em>(rate).</em> voir ci-dessous pour plus d'informations.</p><p><em>deltaTime</em> est en secondes, et le paramètre <em>rate</em> est en Hz.</p> | <p><code>fonction update(deltaTime)</code></p><p><code>{</code></p><p> <code>script.log("Delta time : " + deltaTime);</code></p><p><code>}</code></p>                      |
| **messageBoxCallback(**_id, result)_ | <p>Cette méthode est appelée quand un OkCancel box ou un YesNoCancel box a été lancée puis le script.<br><strong>id</strong> est l'id fourni au moment de l'appel de la fonction, <strong>result</strong> est le resultat (0, 1 ou 2) en fonction du bouton cliqué</p>                                                                                                                                                                                                                         | <p><code>function messageBoxCallback(id, result)</code><br><code>{</code></p><p> <code>script.log("Message box callback : "+id+" > "+result);</code><br><code>}</code></p> |

## Paramètres et Triggers

Tous les paramètres et déclencheurs ont des méthodes communes et des méthodes spécifiques

### Méthodes et propriétés communes

| Méthode                                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Exemple                                                                                                                                                                                                                                                             |
| ---------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **getParent()**                          | Retourne la valeur de ce paramètre                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `myParam.getParent();`                                                                                                                                                                                                                                              |
| **setName(**_name_**)**                  | Définit le nom du paramètre                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `myParam.setName("new name");`                                                                                                                                                                                                                                      |
| **setAttribute(**_attribut, value_**)**  | <p>Définit un attribut du paramètre.</p><p>Tous les paramètres obtiennent :<br><em><strong>readonly :</strong></em> définit le paramètre comme non modifiable</p><p><em><strong>description :</strong></em> modifier la description de l'infobulle</p><p><em><strong>activé :</strong></em> activer ou désactiver ce paramètre</p><p><em><strong>alwaysNotify :</strong></em> active le flag alwaysNotify (si à true, cela déclenchera des mises à jour même si la valeur fixée est la même qu'auparavant).<br>Plus d'informations pour des paramètres spécifiques dans chaque section de paramètres's.</p> | <p><code>myParam.setAttribute("readonly" ,true);</code></p><p><code>myParam.setAttribute("description" ,"new description" ;);</code></p><p><code>myParam.setAttribute("enabled" ,false);</code></p><p><code>myParam.setAttribute("alwaysNotify" , true);</code></p> |
| **isParameter()**                        | retourne si la cible est un paramètre ou un déclencheur                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `var isParam = myTarget.isParameter();`                                                                                                                                                                                                                             |
| **name**                                 | Il s'agit de l'identificateur de nom de l'objet, comme vous le feriez dans un script.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `script.log(myParam.name);`                                                                                                                                                                                                                                         |
| **niceName**                             | C'est le "joli nom" ; de l'objet, tel que vous le voyez dans l'Inspecteur.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `script.log(myParam.niceName);`                                                                                                                                                                                                                                     |
| **getControlAddress (**\[reference]**)** | Retourne l'adresse de contrôle OSC de cet élement. Le paramètre optionnel _**reference**_ permet de spécifier un élément relatif à partir duquel générer l'adresse .                                                                                                                                                                                                                                                                                                                                                                                                                                        | `script.log( myContainer.getControlAddress());`                                                                                                                                                                                                                     |
| **getScriptControlAddress()**            | Retourne l'adresse de contrôle en version script de cet élément.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `script.log( myContainer.getScriptControlAddress());`                                                                                                                                                                                                               |
| **resetValue()**                         | Pour les parametres, remet la valeur à la valeur par défaut                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `myParam.resetValue();`                                                                                                                                                                                                                                             |

### Trigger

| Méthode       | Description           | Exemple                |
| ------------- | --------------------- | ---------------------- |
| **trigger()** | Déclenche ce contrôle | `myTrigger.trigger();` |

### Float Parameter

| Méthode                                 | Description                                                                                                                                                                                                            | Exemple                                          |
| --------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| **get()**                               | Retourne la valeur de ce paramètre                                                                                                                                                                                     | `var value = myFloatParam.get();`                |
| **set(**_value_**)**                    | Définit la valeur de ce paramètre                                                                                                                                                                                      | `myFloatParam.set(.5);`                          |
| **setAttribute(**_attribut, value_**)** | <p>Attributs spécifiques :</p><p><em><strong>ui :</strong></em> L'interface utilisateur à utiliser pour afficher ce paramètre. Les valeurs acceptées sont : <em><strong>time, slider, stepper, label</strong></em></p> | `myStringParam.setAttribute ("ui" ;, "time" ;);` |

### Integer Parameter

| Méthode                                 | Description                                                                                                               | Exemple                                         |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------- |
| **get()**                               | Retourne la valeur de ce paramètre                                                                                        | `var value = myIntParam.get();`                 |
| **set(**_value_**)**                    | Définit la valeur de ce paramètre                                                                                         | `myIntParam.set(2);`                            |
| **setAttribute(**_attribut, value_**)** | <p>Attributs spécifiques :</p><p><em><strong>hexMode :</strong></em> Afficher la valeur en décimal ou en hexadécimal.</p> | `myStringParam.setAttribute ("hexMode", true);` |

### Boolean Parameter

| Méthode              | Description                        | Exemple                           |
| -------------------- | ---------------------------------- | --------------------------------- |
| **get()**            | Retourne la valeur de ce paramètre | `var value = myFloatParam.get();` |
| **set(**_value_**)** | Définit la valeur de ce paramètre  | `myFloatParam.set(.5);`           |

### String Parameter

| Méthode                                 | Description                                                                                                                                                                                                                                                             | Exemple                                             |
| --------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- |
| **get()**                               | Retourne la valeur de ce paramètre                                                                                                                                                                                                                                      | `var value = myStringParam.get();`                  |
| **set(**_value_**)**                    | Définit la valeur de ce paramètre                                                                                                                                                                                                                                       | `myStringParam.set("super" ;);`                     |
| **setAttribute(**_attribut, value_**)** | <p>Attributs spécifiques :</p><p><em><strong>multiline</strong></em> : si le paramètre peut être multiligne</p><p><em><strong>préfixe</strong></em> : ajoute un préfixe avant la valeur</p><p><em><strong>suffixe</strong></em> : ajoute un suffixe après la valeur</p> | `myStringParam.setAttribute ("multiline" ;, true);` |

### Color Parameter

| Méthode              | Description                                                                                                                                                                                                                                                                        | Exemple                                                                                                                                                                                                   |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **get()**            | Retourne la valeur de ce paramètre. Le résultat est un tableau contenant \[r,g,b,a], les valeurs sont comprises entre 0 et 1                                                                                                                                                       | <p><code>var value = myColorParam.get();</code></p><p><code>script.log("green : "+value[1]);</code></p>                                                                                                   |
| **set(**_value_**)** | Définit la valeur de ce paramètre. Vous pouvez soit définir la valeur par valeur hex ARGB, tableau flottant \[r,g,b,a], ou valeurs séparées r,g,b,a. Les valeurs r, g et b sont toujours comprises entre 0 et 1 et l'alpha est facultatif (vous pouvez spécifier r,g,b seulement); | <p><code>//ceci est réglé sur cyan alpha 100%</code></p><p><code>myColorParam.set(0xff00ffffff);</code></p><p><code>myColorParam.set([0,1,1,1]);</code></p><p><code>myColorParam.set(0,1,1,1);</code></p> |

### Target Parameter

| Méthode                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Exemple                                                                                                                                                                                                                         |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **get()**                               | Retourne la valeur de la chaîne de l'adresse cible                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `var address = myTargetParam.get();`                                                                                                                                                                                            |
| **getTarget()**                         | Retourne la cible réelle sélectionnée                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `var target = myTargetParam.getTarget();`                                                                                                                                                                                       |
| **set(**_value_**)**                    | Définit la valeur de la chaîne de caractères de l'adresse cible.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `myTargetParam.set ("/root/modules/osc" ;);`                                                                                                                                                                                    |
| **setAttribute(**_attribut, value_**)** | <p>Attributs spécifiques :</p><p><em><strong>root</strong></em> : le conteneur racine à partir duquel la recherche doit être effectuée</p><p><em><strong>searchLevel</strong></em> : précise le niveau maximum à rechercher dans le root</p><p><em><strong>showParameters</strong></em> : si la cible est contrôlable, cacher ou montrer paramètres</p><p><em><strong>showTriggers</strong></em> : si la cible est contrôlable, cacher ou montrer déclencheurs</p><p><em><strong>labelLevel</strong></em> : le niveau des parents à afficher dans l'IU.</p><p><em><strong>allowedTypes</strong></em> : précise quels types de cible sont acceptés</p><p><em><strong>excludedTypes</strong></em> : précise quels types de cible ne sont pas acceptés</p> | <p><code>myTargetParam.setAttribute ("searchLevel",2);</code></p><p><code>myTargetParam.setAttribute ("root" , root.sequences);</code></p><p><code>myTargetParam.setAttribute ("allowedTypes", ["Mapping","Color"]);</code></p> |

### Enum Parameter

<table data-header-hidden><thead><tr><th width="243">Méthode</th><th width="250">Description</th><th>Exemple</th></tr></thead><tbody><tr><td>Méthode</td><td>Description</td><td>Exemple</td></tr><tr><td><strong>addOption(</strong><em>label, value</em><strong>)</strong></td><td>Ajoute une option à la liste</td><td><code>myEnumParam.addOption("nouvelle option",3);</code></td></tr><tr><td><strong>get()</strong></td><td><p>1.6.x : Retourne la clé sélectionnée</p><p>1.7.x : Retourne la donnée sélectionnée</p></td><td><p><code>var label = myEnumParam.get(); //1.6.x</code></p><p><code>var value= myEnumParam.get(); //1.7.x</code></p></td></tr><tr><td><strong>getData()</strong></td><td>Obtenir les données sélectionnées (1.6.x seulement)</td><td><code>var data = myEnumParam.getData(); //1.6</code></td></tr><tr><td><strong>getKey()</strong></td><td>Obtenir la clé sélectionnée (1.7.x seulement)</td><td><code>var key = myEnumParam.getKey(); //1.7</code></td></tr><tr><td><strong>removeOptions()</strong></td><td>Supprime toutes les options.</td><td><code>myEnumParam.removeOptions();</code></td></tr><tr><td><strong>set(</strong><em>key</em><strong>)</strong></td><td>Définit la valeur avec l'étiquette fournie</td><td><code>myEnumParam.set("nouvelle option");</code></td></tr><tr><td><strong>setData(</strong><em>data</em><strong>)</strong></td><td>Définit la valeur avec la donnée fournie</td><td><code>myEnumParam.setData("data1");</code></td></tr><tr><td><strong>setNext(</strong><em>[loop]</em><strong>)</strong></td><td>Définit la prochaine valeur dans la liste.<br><strong>Loop (</strong>optionnel) : définit si la liste doit boucler en arrivant à la fin</td><td><code>myEnumParam.setNext(true);</code></td></tr><tr><td><strong>setPrevious(</strong><em>[loop]</em><strong>)</strong></td><td>Définit la valeur précédent dans la liste.<br><strong>Loop (</strong>optionnel) : définit si la liste doit boucler en arrivant à la fin</td><td><code>myEnumParam.setPrevious(true);</code></td></tr><tr><td><strong>getAllOptions</strong>()</td><td>Récupère la liste des options disponibles.<br>Le resultat est un tableau d'objets contenant les propriétés "key" et "value"</td><td><code>var options = myEnumParam.getAllOptions();</code><br><code>script.log(options[0].key);</code></td></tr><tr><td><strong>getOptionAt</strong>(<em>index</em>)</td><td>Récupère une option à un index défini de la liste.<br>Le resultat est un objet contenant les propriétés "key" et "value"</td><td><code>var options = myEnumParam.getAllOptions();</code><br><code>script.log(options[0].key);</code></td></tr><tr><td><strong>getIndex</strong>()</td><td>Retourne l'index de l'option sélectionnée</td><td><code>var index = myEnumParam.getIndex();</code></td></tr></tbody></table>

### File Parameter

| Méthode                                      | Description                                                                                                                                                                    | Exemple                                                                                                                              |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| **setAttribute(**_attribut, value_**)**      | <p>Attributs spécifiques :</p><p><em><strong>directoryMode</strong></em> : précise si l'on veut chercher un fichier ou un dossier.</p>                                         | `myFileParam.setAttribute ("directoryMode",true);`                                                                                   |
| **readFile(**_\[asJSON]_**)**                | Lit le contenu du fichier. Si _**asJSON**_ est _vrai,_ alors le contenu sera analysé et renvoyé sous la forme d'un Object.                                                     | <p><code>var myTextContent = myFileParam.readFile ();</code></p><p><code>var myJSONContent = myFileParam.readFile (true);</code></p> |
| **writeFile(data,** _overwriteIfExists_**)** | Ecrit le contenu ou une chaîne d'un Objet dans le fichier sélectionné. Si il existe, _**overwriteIfExists**_ vous permettra de décider de l'écraser ou non (false par défaut). | <p><code>données variables = "super";</code></p><p><code>myFileParam.writeFile (données, vrai);</code></p>                           |
| **getAbsolutePath()**                        | Retourne le chemin absolu de ce fichier.                                                                                                                                       | `var path = myFileParam.getAbsolutePath();`                                                                                          |
| **launchFile(**_arguments**)**_              | Ceci lancera le fichier sélectionné avec les _**arguments**_ fournis                                                                                                           | <p><code>myFileParam.launchFile</code><br><code>("--verbose" ;)</code></p>                                                           |

### Point2D Parameter

| Méthode              | Description                                                                       | Exemple                                                                                          |
| -------------------- | --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| **get()**            | Retourne la valeur de ce paramètre. Le résultat est un tableau contenant \[x, y]. | <p><code>var value = my2dParam.get();</code></p><p><code>script.log("x : "+value[0]);</code></p> |
| **set(**_value_**)** | Définit la valeur de ce paramètre                                                 | <p><code>my2DParam.set(2, 0.5);</code></p><p><code>my2DParam.set([1,4.63]);</code></p>           |

### Point3D Parameter

| Méthode              | Description                                                                          | Exemple                                                                                          |
| -------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------ |
| **get()**            | Retourne la valeur de ce paramètre. Le résultat est un tableau contenant \[x, y, z]. | <p><code>var value = my3dParam.get();</code></p><p><code>script.log("x : "+value[0]);</code></p> |
| **set(**_value_**)** | Définit la valeur de ce paramètre                                                    | <p><code>my3DParam.set(2, 0.5, 0);</code></p><p><code>my3DParam.set([1,4.63, 8]);</code></p>     |

## Container

Les conteneurs sont tout objet qui contient des paramètres ou d'autres récipients.\
Si vous visez un élément de la hiérarchie ( _root_ ou _local_ ), ce sera soit un conteneur, soit un paramètre. Donc si ce n'est pas un paramètre, alors c'est un conteneur.

| Méthode                                                                            | Description                                                                                                                                                                                            | Exemple                                                                                                                                                                                                                                                                                                  |
| ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **getChild(**_childName_**)**                                                      | Retourne le paramètre ou le conteneur avec le nom fourni.                                                                                                                                              | `var child = myContainer.getChild("activity");`                                                                                                                                                                                                                                                          |
| **getParent()**                                                                    | Retourne le conteneur parent                                                                                                                                                                           | `var parent = myContainer.getParent();`                                                                                                                                                                                                                                                                  |
| **setName(**_name, \[shortName]_**)**                                              | <p>Change le nom du conteneur.</p><p>Si <em><strong>shortName</strong></em> est mentionné, cela assignera son nom d'acces pour pouvoir y accéder via <em>getChild</em> ultérieurement.</p>             | `myContainer.setName("new name");`                                                                                                                                                                                                                                                                       |
| **setCollapsed(**_value_**)**                                                      | Modifie l'état de repli du conteneur, s'il peut être replié.                                                                                                                                           | `myContainer.setCollapsed(false);`                                                                                                                                                                                                                                                                       |
| **name**                                                                           | Il s'agit de l'identificateur de nom de l'objet, comme vous le feriez dans un script.                                                                                                                  | `script.log(myContainer.name);`                                                                                                                                                                                                                                                                          |
| **niceName**                                                                       | C'est le "joli nom" ; de l'objet, tel que vous le voyez dans le Inspecteur.                                                                                                                            | `script.log(myContainer.niceName);`                                                                                                                                                                                                                                                                      |
| **addTrigger(**_name, description_**)**                                            | Ceci ajoutera un déclencheur (bouton).                                                                                                                                                                 | `var myTrigger = myContainer.addTrigger("My Trigger", "Trigger description" ;);`                                                                                                                                                                                                                         |
| **addFloatParameter(**_name, description, default, min max_**)**                   | Cela ajoutera un paramètre de nombre flottant (curseur).                                                                                                                                               | `var myFloatParam = myContainer.addFloatParameter("My Float Param","Description of my float param",.1,0,1);`                                                                                                                                                                                             |
| **addIntParameter(**_name, description, default, min max_**)**                     | ajoute un paramètre de nombre entier (step), valeur par défaut de 2, avec une valeur se situant entre 0 et 10                                                                                          | `var myIntParam = myContainer.addIntParameter("My Int Param","Description of my int param",2,0,10);`                                                                                                                                                                                                     |
| **addBoolParameter(**_name, description, default_**)**                             | ajoute un paramètre booléen (toggle)                                                                                                                                                                   | `var myBoolParam = myContainer.addBoolParameter("My Bool Param","Description of my bool param",false);`                                                                                                                                                                                                  |
| **addStringParameter(**_name, description, default_**)**                           | ajoute un paramètre de chaîne (champ de texte)                                                                                                                                                         |  `var myStringParam = myContainer.addStringParameter("My String Param","Description of my string param", "cool");`                                                                                                                                                                                       |
| **addColorParameter(**_name, description, default_**)**                            | ajoute un paramètre de couleur (sélecteur de couleur).                                                                                                                                                 | <p><code>var myColorParam = script.addColorParameter("My Color Param","Description of my color param",0xff0000ff) ; //default blue alpha 100%</code></p><p><code>var myColorParam2 = script.addColorParameter("My Color Param 2 ","Description of my color param",[1,0,1]) ; //default purple</code></p> |
| **addPoint2DParameter(**_name, description_**)**                                   | ajoute paramètre de point 2d                                                                                                                                                                           | `var myP2DParam = myContainer.addPoint2DParameter("My P2D Param","Description of my p2d param");`                                                                                                                                                                                                        |
| **addPoint3DParameter(**_name, description_**)**                                   | ajoute paramètre de point 3d                                                                                                                                                                           | `var myP3DParam = myContainer.addPoint3DParameter("My P3D Param","Description of my p3d param");`                                                                                                                                                                                                        |
| **addTargetParameter(**_name, description_**)**                                    | ajoute un paramètre cible (pour référencer un autre paramètre)                                                                                                                                         | `var myTargetParam = myContainer.addTargetParameter("My Target Param","Description of my target param");`                                                                                                                                                                                                |
| **addFileParameter(**_name, description,_ \[directoryMode]**)**                    | <p>Ajoute un paramètre de fichier (pour référencer le fichier ou le dossier sur le disque).</p><p>Si le mode répertoire est réglé sur vrai, un dossier peut être sélectionné au lieu d'un fichier.</p> | `var myFileParam = myContainer.addFileParameter("My File Param","Description of my file param");`                                                                                                                                                                                                        |
| **addEnumParameter(**_name, description, label1, value1, label2, value2, .._.**)** | <p>Ajoute un paramètre d'énumération (menu déroulant avec options)</p><p>Chaque paire de valeurs après les 2 premiers arguments définit une option et ses données liées</p>                            | `var myEnumParam = myContainer.addEnumParameter("My Enum Param","Description of my enum param", "Option 1", 1,"Option 2", 5, "Option 3", "banana");`                                                                                                                                                     |
| **addContainer(**name**)**                                                         | Ajoute un conteneur à l'intérieur du conteneur.                                                                                                                                                        | `var childContainer = myContainer.addContainer("My Child Container");`                                                                                                                                                                                                                                   |
| **removeContainer(**name**)**                                                      | Supprime un conteneur enfant du conteneur.                                                                                                                                                             | `myContainer.removeContainer ("myChildContainer")`                                                                                                                                                                                                                                                       |
| **removeParameter(**_name_**)**                                                    | Supprime un paramètre du conteneur.                                                                                                                                                                    | `myContainer.removeParameter ("myChildParameter");`                                                                                                                                                                                                                                                      |
| **getControlAddress (**\[reference]**)**                                           | Retourne l'adresse de contrôle OSC de cet élement. Le paramètre optionnel _**reference**_ permet de spécifier un élément relatif à partir duquel générer l'adresse .                                   | `script.log( myContainer.getControlAddress());`                                                                                                                                                                                                                                                          |
| **getScriptControlAddress()**                                                      | Retourne l'adresse de contrôle en version script de cet élément.                                                                                                                                       | `script.log( myContainer.getScriptControlAddress());`                                                                                                                                                                                                                                                    |

## Managers

Les managers sont des types particuliers de conteneurs. Dans le logiciel, vous pouvez voir qu'un conteneur est un gestionnaire lorsqu'il y a une icône "**+**\*" à droite de son bloc. Dans la plupart des cas, il s'agit simplement de conteneurs améliorés. La plupart du temps, les gestionnaires qui vous intéresseront sont **le gestionnaire de modules, le gestionnaire de séquences, les gestionnaires de couches et les gestionnaires de clés d'automatisation.**\
Lorsque vous manipulez un gestionnaire, vous avez accès à des fonctions et des propriétés spécifiques comme l'ajout d'éléments, la suppression d'éléments ou l'obtention d'un tableau de ses éléments.

| Méthode                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Exemple                                                                                                                            |
| ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| **addItem(**_\[type]_**)**      | <p>Ajoute un élément au gestionnaire et le renvoie.</p><p>Certains gestionnaires comme le gestionnaire de modules ou le gestionnaire de couches peuvent créer plusieurs types d'articles. Ils ont donc besoin d'un type d'article à créer, que vous devez définir dans l'argument <em><strong>type</strong></em>.</p><p>D'autres gestionnaires comme le gestionnaire de séquences ne sont pas nécessaires car il n'y a qu'un seul type de séquence. Dans ces cas, vous ne devez pas fournir d''argument lors de l'appel de la fonction.</p> | <p><code>var newOSCModule = root.modules.addItem("OSC");</code></p><p><code>var newSequence = root.sequences.addItem();</code></p> |
| **removeItem(**_item_**)**      | Supprime un élément. _**item**_ doit être un élément géré par ce gestionnaire.                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `root.modules.removeItem (myModule);`                                                                                              |
| **getItems()**                  | Retourne un tableau contenant tous les éléments de ce gestionnaire.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | <p><code>var items = root.sequences.getItems();</code></p><p><code>script.log("Num séquences : "+items.length);</code></p>         |
| **getItemWithName(**_name_**)** | Retourne le premier élément trouvé avec _**nom.**_ Ceci va rechercher une correspondance exacte entre niceName, shortName et la version minuscule.                                                                                                                                                                                                                                                                                                                                                                                          | `var introSeq = root.sequences.getItemWithName ("Intro" ;);`                                                                       |
| **getItemAt(**_index_**)**      | Retourne l'élément à l'index _**index**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `var curSequence = root.sequences.getItemAt(1) ; //Le premier est 0, ici on obtient donc le deuxième élément de la liste.`         |
| **getItemIndex(**_item_**)**    | Retourne l'index de l'élément spécifié _**item.**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `var index= root.sequences.getItemIndex (curSequence);`                                                                            |
| **getItemBefore(**_item_**)**   | Retourne l'élément avant l'élément spécifié _**item.**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `var prevSequence = root.sequences.getItemBefore (curSequence);`                                                                   |
| **getItemAfter(**_item_**)**    | Retourne l'élément après l'élément _**item.**_ spécifié                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `var nextSequence = root.sequences.getItemAfter (curSequence);`                                                                    |

### States

Les States ont des méthodes dédiées permettant de faciliter la création de certains éléments comme les transitions

<table><thead><tr><th width="249.33333333333331">Method</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>addTransition(<em>source, dest)</em></td><td>Ajoute une transition entre 2 States.<br><strong>source</strong> et <strong>dest</strong> sont les noms des States pour lesquels créer une transition.</td><td><code>var transition = root.states.addTransition("State A", "State B");</code></td></tr></tbody></table>

### Automation

Les automations sont des types spéciaux de managers, qui représentent des courbes. On peut les trouver dans des Mapping Layers, ou des Curve Map Filter par exemple. Ils contiennet des méthodes spécifiques, permettant de manipuler et récupérer des informations sur la courbe.

<table data-header-hidden><thead><tr><th width="199.6325814649066"></th><th width="300.26771653543307"></th><th></th></tr></thead><tbody><tr><td>Méthode</td><td>Description</td><td>Exemple</td></tr><tr><td>getValueAtPosition(<em>position</em>)</td><td>Récupère la valeur de la courve à une position donnée</td><td><code>var val = automation.getValueAtPosition(2.5);</code></td></tr><tr><td>getKeyAtPosition(<em>position</em>)</td><td>Récupère la clé la plus proche à une position donnée</td><td><code>var key = automation.getKeyAtPosition(2.5);</code></td></tr><tr><td>getKeysBetween(<em>start, end</em>)</td><td>Récupère un tableau contenant toutes les clés contenues entre <em>start</em> et <em>end.</em></td><td><code>var keys = automation.getKeysBetween(2.5, 4.7);</code></td></tr></tbody></table>

## Objet _script_

L'objet _script_ fait référence au conteneur de script. Vous pouvez ajouter vos propres paramètres personnalisés ici, ainsi que des informations de journalisation, des avertissements et des erreurs.

<table data-header-hidden><thead><tr><th>Méthode</th><th width="301.57265825642764">Description</th><th>Exemple</th></tr></thead><tbody><tr><td>Méthode</td><td>Description</td><td>Exemple</td></tr><tr><td><strong>addTrigger(</strong><em>name, description</em><strong>)</strong></td><td>Ceci ajoutera un déclencheur (bouton)</td><td><code>var myTrigger = script.addTrigger("My Trigger", "Trigger description");</code></td></tr><tr><td><strong>addFloatParameter(</strong><em>name, description, default, min max</em><strong>)</strong></td><td>Ceci ajoutera un paramètre de type nombre flottant (curseur).</td><td><code>var myFloatParam = script.addFloatParameter("My Float Param","Description of my float param",.1,0,1);</code></td></tr><tr><td><strong>addIntParameter(</strong><em>name, description, default, min max</em><strong>)</strong></td><td>ajoute un paramètre de type nombre entier (step), valeur par défaut de 2, avec une valeur se situant entre 0 et 10</td><td><code>var myIntParam = script.addIntParameter("My Int Param","Description of my int param",2,0,10);</code></td></tr><tr><td><strong>addBoolParameter(</strong><em>name, description, default</em><strong>)</strong></td><td>ajoute un paramètre booléen (toggle)</td><td><code>var myBoolParam = script.addBoolParameter("My Bool Param","Description of my bool param",false);</code></td></tr><tr><td><strong>addStringParameter(</strong><em>name, description, default</em><strong>)</strong></td><td>ajoute un paramètre de chaîne (champ de texte)</td><td> <code>var myStringParam = script.addStringParameter("My String Param","Description of my string param", "cool");</code></td></tr><tr><td><strong>addColorParameter(</strong><em>name, description, default</em><strong>)</strong></td><td>ajoute un paramètre de couleur (sélecteur de couleur).</td><td><p><code>var myColorParam = script.addColorParameter("My Color Param","Description of my color param",0xff0000ff) ; //default blue alpha 100%</code></p><p><code>var myColorParam2 = script.addColorParameter("My Color Param 2 ","Description of my color param",[1,0,1]) ; //default purple</code></p></td></tr><tr><td><strong>addPoint2DParameter(</strong><em>name, description</em><strong>)</strong></td><td>ajoute un paramètre de point 2d</td><td><code>var myP2DParam = script.addPoint2DParameter("My P2D Param","Description of my p2d param");</code></td></tr><tr><td><strong>addPoint3DParameter(</strong><em>name, description</em><strong>)</strong></td><td>ajoute un paramètre de point 3d</td><td><code>var myP3DParam = script.addPoint3DParameter("My P3D Param","Description of my p3d param");</code></td></tr><tr><td><strong>addTargetParameter(</strong><em>name, description</em><strong>)</strong></td><td>ajoute un paramètre cible (pour référencer un autre paramètre)</td><td><code>var myTargetParam = script.addTargetParameter("My Target Param","Description of my target param");</code></td></tr><tr><td><strong>addFileParameter(</strong><em>name, description,</em> [directoryMode]<strong>)</strong></td><td><p>Ajoute un paramètre de fichier (pour référencer le fichier ou le dossier sur le disque).</p><p>Si le mode répertoire est réglé sur vrai, un dossier peut être sélectionné au lieu d'un fichier.</p></td><td><code>var myFileParam = script.addFileParameter("My file param","Description of my file param");</code></td></tr><tr><td><strong>addEnumParameter(</strong><em>name, description, label1, value1, label2, value2, ..</em>.<strong>)</strong></td><td><p>Ajoute un paramètre de type énumération (menu déroulant avec options)</p><p>Chaque paire de valeurs après les 2 premiers arguments définit une option et ses données liées</p></td><td><code>var myEnumParam = script.addEnumParameter("My Enum Param","Description of my enum param", "Option 1" ;, 1,"Option 2" ;, 5, "Option 3" ;, "banana" ;);</code></td></tr><tr><td><strong>log(</strong><em>message</em><strong>)</strong></td><td>Journalise un message (doit activer "Log" ; dans les paramètres du script)</td><td><code>script.log("Ceci est un message");</code></td></tr><tr><td><strong>logWarning(</strong><em>message</em><strong>)</strong></td><td>Journalise un message en guise d'avertissement</td><td><code>script.logWarning("Ceci est un avertissement");</code></td></tr><tr><td><strong>logError(</strong><em>message</em><strong>)</strong></td><td>Journalise un message comme une erreur</td><td><code>script.logError("Ceci est une erreur");</code></td></tr><tr><td><strong>setUpdateRate(</strong><em>rate</em><strong>)</strong></td><td>Définit la vitesse à laquelle la fonction update() est appelée</td><td><code>script.setUpdateRate(50);</code></td></tr><tr><td><strong>setExecutionTimeout(</strong> <em>timeInSeconds</em><strong>)</strong></td><td>Défini le temps maximum avant pour éxecuter les appels à ce script</td><td><code>script.setExecutionTimeout(10);</code></td></tr><tr><td><strong>fonction scriprtParameterChanged(</strong><em>param</em><strong>)</strong></td><td>Cette fonction sera appelée chaque fois qu'un paramètre de ce script aura changé.</td><td><code>fonction scriptParameterChanged(param){ script.log("Param changed : "+param.name); }</code></td></tr></tbody></table>

## Objet _root_

L'objet _root_ fait référence au moteur de Chataigne, qui est l'objet racine de tous les parents. Il permet d'accéder à n'importe quel objet dans la hiérarchie de Chataigne. La meilleure façon d'y accéder est de cliquer avec le bouton droit de la souris sur l'interface utilisateur d'un paramètre et de sélectionner "Copy Script control address". Vous pouvez alors passer l'adresse dans votre script et vous pourrez contrôler ce paramètre.

## Objet _local_

L'objet _local_ dépend de l'endroit où les scripts sont exécutés.

* Si le script est exécuté dans un module, la variable locale fera référence au module. Vous pouvez trouver toutes les fonctions de module dans la section [Module Scripts](module-scripts.md).&#x20;
* Si le script s'exécute dans une condition, la variable locale fera référence à la condition. Vous pouvez trouver toutes les fonctions de condition dans la section [Condition Scripts.](condition-scripts.md)&#x20;
* Si le script s'exécute à l'intérieur d'un filtre, la variable locale fera référence au filtre. Vous pouvez trouver toutes les fonctions de filtre dans la section [Filter Scripts](filter-scripts.md).

## Objet _util_

L'objet _util_ fournit des aides et des fonctions utilitaires comme le temps ou la conversion.

<table data-header-hidden><thead><tr><th width="266.5806451612903">Méthode</th><th>Description</th><th>Exemple</th></tr></thead><tbody><tr><td>Méthode</td><td>Description</td><td>Exemple</td></tr><tr><td><strong>getAppVersion()</strong></td><td>Retourne la version actuelle de l'application</td><td><code>var version = util.getAppVersion();</code></td></tr><tr><td><strong>getOSInfos()</strong></td><td><p>Retourne les infos de l'OS. L'objet retournée contient les propriétés suivantes :</p><p>"name" : le nom de l'OS</p><p>"type": le type OS</p><p>"computerName": le nom de l'ordinateur</p><p>"language": la langue de l'OS</p><p>"username" : le nom d'utilisateur</p><p></p></td><td><p><code>var infos = util.getOSInfos();</code></p><p><code>script.log("Hello "+infos.username);</code></p></td></tr><tr><td><strong>getEnvironmentVariable(</strong><em>key</em><strong>)</strong></td><td>Retourne la valeur d'une variable d'environnement de l'OS.</td><td><code>var pathEnv = util.getEnvironmentVariable("PATH");</code></td></tr><tr><td><strong>getTime()</strong></td><td>Retourne le temps écoulé depuis le démarrage du système en secondes</td><td><code>var time = util.getTime();</code></td></tr><tr><td><strong>getTimestamp()</strong></td><td>Retourne le temps depuis le 1er janvier 1970 en secondes</td><td><code>var timestamp = util.getTimestamp();</code></td></tr><tr><td><strong>delayThreadMS(</strong>milliseconds)</td><td>Pause l'execution pendant le nombre de millisecondes fournies.</td><td><code>script.delayThreadMS(500);</code></td></tr><tr><td><strong>getFloatFromBytes(</strong><em>byte1, byte2, byte3, byte4</em><strong>)</strong></td><td>Retourne un float de 4 octets (big endian, l'octet 1 est le plus significatif)</td><td><code>var value = util.getFloatFromBytes(0, 0, 2, 10);</code></td></tr><tr><td><strong>getInt32FromBytes(</strong><em>byte1, byte2, byte3, byte4</em><strong>)</strong></td><td>Retourne un entier de 32 bits à partir de 4 octets (big endian, l'octet 1 est le plus significatif)</td><td><code>var value = util.getInt32FromBytes(0, 0, 2, 10);</code></td></tr><tr><td><strong>getInt64FromBytes(</strong><em>byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8</em><strong>)</strong></td><td>Retourne un entier de 64 bits à partir de 8 octets (big endian, l'octet 1 est le plus significatif)</td><td><code>var value = util.getInt64FromBytes(0, 5, 7, 22, 0, 0, 2, 10);</code></td></tr><tr><td><strong>getIPs()</strong></td><td>Retourne un tableau de toutes les adresses IP trouvées</td><td><p><code>var ips = util.getIPs();</code></p><p><code>for(var i=0 ; i&#x3C;ips.length ; i++) { script.log(ips[i]) ; }</code></p></td></tr><tr><td><strong>encodeHMAC_SHA1(</strong><em>text, key</em><strong>)</strong></td><td>Retourne une chaîne codée HMAC-SHA1</td><td><code>var encoded = util.encodeHMAC_SHA1("my text", "my key" ;);</code></td></tr><tr><td><strong>toBase64(</strong><em>value</em><strong>);</strong></td><td>Retourne une chaîne convertie en base-64 à partir d'une chaîne utf8.</td><td><code>var str64 = util.toBase64("cool" ;);</code></td></tr><tr><td><strong>fromBase64(</strong><em>value</em><strong>);</strong></td><td>Retourne un bloc de données à partir d'une chaine encodée en base-64</td><td><code>var str_decoded = util.toBase64("sGVsbG8gd29ybGQh");</code></td></tr><tr><td><strong>fileExists(</strong><em>path</em><strong>)</strong></td><td>Retourne <strong>true</strong> si un fichier existe à l'emplacement fourni, sinon <strong>false</strong></td><td><code>script.log(fileExists("myfile.txt"));</code></td></tr><tr><td><strong>directoryExists(</strong><em>path</em><strong>)</strong></td><td>Retourne <strong>true</strong> si un dossier existe à l'emplacement fourni, sinon <strong>false</strong></td><td><code>script.log(directoryExists("myFolder"));</code></td></tr><tr><td><strong>readFile(</strong><em>path,</em> <em>[asJSON]</em><strong>)</strong></td><td>Lit le contenu du fichier à l'emplacement <em><strong>path</strong></em>. Si <em><strong>asJSON</strong></em> est <em>vrai,</em> alors le contenu sera analysé et renvoyé sous la forme d'un Objet.</td><td><code>var myTextContent = util.readFile("myfile.txt");</code></td></tr><tr><td><strong>writeFile(</strong><em>path, data</em><strong>,</strong> <em>overwriteIfExists</em><strong>)</strong></td><td>Ecrit le contenu d'une chaîne ou d'un Objet dans le fichier à l'emplacement <em><strong>path</strong></em>. Si le fichier existe, <em><strong>overwriteIfExists</strong></em> vous permettra de décider si il doit être écrasé ou non (false par défaut).</td><td><p><code>données variables = "super";</code></p><p><code>util.writeFile("monfichier.txt", données, vrai);</code></p></td></tr><tr><td><strong>createDirectory(</strong><em>folderPath</em><strong>)</strong></td><td>Crée un répertoire à l'emplacement spécifié.</td><td><code>util.createDirectory("path/to/dir" ;);</code></td></tr><tr><td><strong>getObjectProperties(</strong><em>objet, includeParameters, includeObjects</em><strong>)</strong></td><td>Retourne un tableau de tous les noms de propriétés de cet <em><strong>objet</strong></em>. Vous pouvez spécifier si vous voulez inclure des paramètres et/ou des objets (comme des conteneurs). La valeur par défaut est include all.</td><td><code>var propNames = util.getObjectProperties(myObject, true, false) ; //retourne seulement les paramètres</code></td></tr><tr><td><strong>getObjectMethods(</strong><em>objet</em><strong>)</strong></td><td>Retourne un tableau de tous les noms de méthodes de cet <em><strong>objet</strong></em>.</td><td><code>var methods= util.getObjectMethods();</code></td></tr><tr><td><strong>copyToClipboard(</strong><em>data, data2...)</em></td><td>Copie les données concaténées dans le presse-papier.</td><td><code>util.copyToClipboard("super",5, myData);</code></td></tr><tr><td><strong>getFromClipboard(</strong><em>)</em></td><td>Retourne le contenu du presse-papier.</td><td><code>var data = util.getFromClipboard();</code></td></tr><tr><td><strong>showMessageBox(</strong><em>title, message, [icon, buttonText]</em><strong>)</strong></td><td><p>Affiche un message popup avec un seul bouton.</p><p>Il est possible de spécifier une <strong>icone</strong> (valeurs acceptées "<em><strong>info", "warning", "question"</strong></em> ) ainsi que le texte du bouton.</p></td><td><code>util.showMessageBox("Super info !", "This is a message for you", "info", "Got it");</code></td></tr><tr><td><strong>showOkCancelBox(</strong><em>id, title, message, [icon, button1Text, button2Text]</em><strong>)</strong></td><td><p>Affiche un message popup avec 2 boutons.</p><p>Le paramètre <em><strong>id</strong></em> spécifie l'identifiant de la box qui sera utilisé au moment du callback (voir <em>messageBoxCallback).</em></p><p>Il est possible de spécifier une <strong>icone</strong> (valeurs acceptées "<em><strong>info", "warning", "question"</strong></em> ) ainsi que le texte des boutons.</p><p>La valeur retournée est <em><strong>true</strong></em> si "OK" a été cliqué, sinon <em><strong>false.</strong></em></p></td><td><code>util.showOkCancelBox("myWarningBoxId", "Super warning!", "This is a warning for you", "warning", "Got it","Naaah");</code></td></tr><tr><td><strong>showYesNoCancelBox(</strong><em>id, title, message, [icon, button1Text, button2Text, button3Text]</em> <strong>),</strong></td><td><p>Affiche un message popup avec 3 boutons.</p><p>Le paramètre <em><strong>id</strong></em> spécifie l'identifiant de la box qui sera utilisé au moment du callback (voir <em>messageBoxCallback).</em></p><p>Il est possible de spécifier une <strong>icone</strong> (valeurs acceptées "<em><strong>info", "warning", "question"</strong></em> ) ainsi que le texte des boutons.</p><p>La valeur retournée est <strong>0, 1 ou 2</strong> en fonction du bouton cliqué.</p></td><td><code>util.showYesNoCancelBox("myConfirmBoxId", "Confirm ?", "Do you really want to do that ?", "question", "Yeah", "Never", "Don't care...");</code></td></tr></tbody></table>

